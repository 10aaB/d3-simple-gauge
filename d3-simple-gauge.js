!function(t,e){if("function"==typeof define&&define.amd)define(["exports","d3"],e);else if("undefined"!=typeof exports)e(exports,require("d3"));else{var i={};e(i,t.d3),t.d3SimpleGauge=i}}(this,function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleGauge=void 0;var _=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(e);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),a={CHAR_INSET:10,BAR_WIDTH:40,EASE_TYPE:_.easeElastic,NEEDLE_ANIMATION_DELAY:0,NEEDLE_ANIMATION_DURATION:3e3,NEEDLE_RADIUS:15,PAD_RAD:.05},c=function(t){return 360*t*Math.PI/180},d=function(){function e(t){if(i(this,e),!t.el)throw new Error("The element must be valid.");this._animationDelay=t.animationDelay,this._animationDuration=t.animationDuration,this._easeType=t.easeType,this._el=t.el,this._length=t.length,this._percent=t.percent,this._radius=t.radius,this._initialize()}return n(e,[{key:"update",value:function(t){var a=this;this._el.transition().delay(this._animationDelay).ease(this._easeType).duration(this._animationDuration).selectAll(".needle").tween("progress",function(){var e=this,i=t-a._percent,n=a._percent;return function(t){return a._percent=n+t*i,_.select(e).attr("d",a._getPath(a._percent))}})}},{key:"_initialize",value:function(){this._el.append("circle").attr("class","needle-center").attr("cx",0).attr("cy",0).attr("r",this._radius),this._el.append("path").attr("class","needle").attr("d",this._getPath(this._percent))}},{key:"_getPath",value:function(t){var e=Math.PI/2,i=c(t/2),n=0-this._length*Math.cos(i),a=0-this._length*Math.sin(i);return"M "+(0-this._radius*Math.cos(i-e))+" "+(0-this._radius*Math.sin(i-e))+" L "+n+" "+a+" L "+(0-this._radius*Math.cos(i+e))+" "+(0-this._radius*Math.sin(i+e))}}]),e}();t.SimpleGauge=function(){function e(t){if(i(this,e),!t.el)throw new Error("The element must be valid.");if(isNaN(t.height)||t.height<=0)throw new RangeError("The height must be a positive number.");if(isNaN(t.sectionsCount)||t.sectionsCount<=0)throw new RangeError("The sections count must be a positive number");if(isNaN(t.width)||t.width<=0)throw new RangeError("The width must be a positive number.");if(void 0!==t.animationDelay&&(isNaN(t.animationDelay)||t.animationDelay<0))throw new RangeError("The transition delay must be greater or equal to 0.");if(void 0!==t.animationDuration&&(isNaN(t.animationDuration)||t.animationDuration<0))throw new RangeError("The transition duration must be greater or equal to 0.");if(void 0!==t.barWidth&&(isNaN(t.barWidth)||t.barWidth<=0))throw new RangeError("The bar width must be a positive number");this._animationDelay=t.animationDelay||a.NEEDLE_ANIMATION_DELAY,this._animationDuration=t.animationDuration||a.NEEDLE_ANIMATION_DURATION,this._barWidth=t.barWidth||a.BAR_WIDTH,this._easeType=t.easeType||a.EASE_TYPE,this._el=t.el,this._height=t.height,this._sectionsCount=t.sectionsCount,this._width=t.width,this.percent=void 0!==t.percent?t.percent:0,this._initialize()}return n(e,[{key:"_initialize",value:function(){var r=this,s=1/this._sectionsCount/2,o=a.PAD_RAD,h=a.CHAR_INSET,u=.75,l=Math.min(this._width,2*this._height)/2,t=this._el.append("g").attr("transform","translate("+this._width/2+", "+this._height+")");t.selectAll(".arc").data(_.range(1,this._sectionsCount+1)).enter().append("path").attr("class",function(t){return"arc chart-color"+t}).attr("d",function(t){var e=c(u),i=e+c(s);u+=s;var n=0===t?0:o/2,a=t===r._sectionsCount?0:o/2;return _.arc().outerRadius(l-h).innerRadius(l-h-r._barWidth).startAngle(e+n).endAngle(i-a)(r)}),this._needle=new d({animationDelay:this._animationDelay,animationDuration:this._animationDuration,easeType:this._easeType,el:t,length:.5*this._height,percent:this._percent,radius:a.NEEDLE_RADIUS})}},{key:"percent",get:function(){return this._percent},set:function(t){if(isNaN(t)||t<0||1<t)throw new RangeError("The percentage must be between 0 and 1.");this._needle&&this._needle.update(t),this._percent=t}}]),e}()});